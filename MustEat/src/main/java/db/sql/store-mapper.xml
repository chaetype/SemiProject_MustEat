<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	
	<!-- 채윤 : 식당리뷰목록조회 -->
	<entry key="selectStoreReviewList">
	SELECT
	        RE_NO
	       ,M.MEM_NICKNAME
	       ,M.MEM_ID
	       ,REVIEW_TITLE
	       ,REVIEW_RATE
	       ,REVIEW_ENROLLDATE
	       ,M.MEM_GRADE
	       ,COUNT
	FROM STORE_RE SR
	JOIN MEMBER M ON (SR.REVIEW_WRITER = M.MEM_NO)
	ORDER
    BY RE_NO DESC
	</entry>
	
	<!-- 채윤 : 식당 리뷰 검색 -->
	<entry key="userStoreReview">
		SELECT
	        RE_NO
	       ,M.MEM_NICKNAME
	       ,M.MEM_ID
	       ,REVIEW_TITLE
	       ,REVIEW_RATE
	       ,REVIEW_ENROLLDATE
	       ,M.MEM_GRADE
	       ,COUNT
		FROM STORE_RE SR
		JOIN MEMBER M ON (SR.REVIEW_WRITER = M.MEM_NO)
	</entry>
	
	<!-- 채윤 : 식당 상세조회 -->
	<entry key="selectStore">
		SELECT 
		       STORE_NO
		     , STORE_NAME
		     , STORE_ADDRESS
		     , STORE_INTRO
		     , STORE_IMG_PATH
		     , STORE_POPULARITY
		     , STORE_POP_INFO
		     , STORE_POP_PATH
		     , REVIEW_WRITER
		     , REVIEW_CONTENT
		     , REVIEW_IMG
		  FROM STORE S
		  JOIN STORE_RE SR ON (SR.STORE_NO = S.STORE_NO)
		 WHERE STORE_NO = ?
	</entry>
	
	<!-- 채윤 식당 조회수 -->
	<entry key="increaseCount">
		UPDATE STORE
		   SET COUNT = COUNT+1
		 WHERE STORE_NO = ?
		   AND STATUS = 'Y'
	</entry>
	
	<entry key="selectNewStoreReview">
	        		SELECT ROWNUM, A.*
			FROM (
			        SELECT REVIEW_TITLE
			             , STORE_NAME
			             , SCRAP_COUNT
			             , REVIEW_ENROLLDATE
			        FROM STORE_RE
			        JOIN MEMBER ON (MEM_NO = REVIEW_WRITER)
			        JOIN STORE USING (STORE_NO) 
			        WHERE MEM_ID = ? <!-- 로그인한 회원 아이디 -->
			        ORDER BY REVIEW_ENROLLDATE DESC
			    )A
		WHERE ROWNUM BETWEEN 1 AND 2
	</entry>
</properties>
